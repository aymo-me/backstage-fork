<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@backstage/plugin-search-backend-module-pg | root</title><meta name="description" content="Documentation for root"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">root</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">@backstage/plugin-search-backend-module-pg</a></li></ul><h1>Module @backstage/plugin-search-backend-module-pg</h1></div><section class="tsd-panel tsd-typography"><h1 id="search-backend-module-pg" class="tsd-anchor-link">search-backend-module-pg<a href="#search-backend-module-pg" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This plugin provides an easy to use <code>SearchEngine</code> implementation to use with the
<code>@backstage/plugin-search-backend</code> based on Postgres.
Therefore it targets setups that want to avoid maintaining another external
service like elastic search. The search provides decent results and performs
well with ten thousands of indexed documents.
The connection to postgres is established via the database manager also used by
other plugins.</p>
<blockquote>
<p><strong>Important</strong>: The search plugin requires at least Postgres 12!</p>
</blockquote>
<h2 id="getting-started" class="tsd-anchor-link">Getting started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See <a href="https://backstage.io/docs/features/search/search-engines#postgres">Backstage documentation</a>
for details on how to setup Postgres based search for your Backstage instance.</p>
<h2 id="optional-configuration" class="tsd-anchor-link">Optional Configuration<a href="#optional-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The following is an example of the optional configuration that can be applied when using Postgres as the search backend.</p>
<pre><code class="yaml"><span class="hl-9">search</span><span class="hl-2">:</span><br/><span class="hl-2">  </span><span class="hl-9">pg</span><span class="hl-2">:</span><br/><span class="hl-2">    </span><span class="hl-9">highlightOptions</span><span class="hl-2">:</span><br/><span class="hl-2">      </span><span class="hl-9">useHighlight</span><span class="hl-2">: </span><span class="hl-3">true</span><span class="hl-2"> </span><span class="hl-0"># Used to enable to disable the highlight feature. The default value is true</span><br/><span class="hl-2">      </span><span class="hl-9">maxWord</span><span class="hl-2">: </span><span class="hl-12">35</span><span class="hl-2"> </span><span class="hl-0"># Used to set the longest headlines to output. The default value is 35.</span><br/><span class="hl-2">      </span><span class="hl-9">minWord</span><span class="hl-2">: </span><span class="hl-12">15</span><span class="hl-2"> </span><span class="hl-0"># Used to set the shortest headlines to output. The default value is 15.</span><br/><span class="hl-2">      </span><span class="hl-9">shortWord</span><span class="hl-2">: </span><span class="hl-12">3</span><span class="hl-2"> </span><span class="hl-0"># Words of this length or less will be dropped at the start and end of a headline, unless they are query terms. The default value of three (3) eliminates common English articles.</span><br/><span class="hl-2">      </span><span class="hl-9">highlightAll</span><span class="hl-2">: </span><span class="hl-3">false</span><span class="hl-2"> </span><span class="hl-0"># If true the whole document will be used as the headline, ignoring the preceding three parameters. The default is false.</span><br/><span class="hl-2">      </span><span class="hl-9">maxFragments</span><span class="hl-2">: </span><span class="hl-12">0</span><span class="hl-2"> </span><span class="hl-0"># Maximum number of text fragments to display. The default value of zero selects a non-fragment-based headline generation method. A value greater than zero selects fragment-based headline generation (see the linked documentation above for more details).</span><br/><span class="hl-2">      </span><span class="hl-9">fragmentDelimiter</span><span class="hl-2">: </span><span class="hl-10">&#39; ... &#39;</span><span class="hl-2"> </span><span class="hl-0"># Delimiter string used to concatenate fragments. Defaults to &quot; ... &quot;.</span><br/><span class="hl-2">    </span><span class="hl-9">normalization</span><span class="hl-2">: </span><span class="hl-12">0</span><span class="hl-2"> </span><span class="hl-0"># Ranking functions use an integer bit mask to control document length impact on rank. The default value is 0</span>
</code><button type="button">Copy</button></pre>

<p>The Normalization option controls several behaviors. It is a bit mask. <a href="https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-RANKING">Ranking Search Results</a> has more details.</p>
<p>Example with bit mask specifying more behaviours:</p>
<ul>
<li>2 divides the rank by the document length</li>
<li>4 divides the rank by the mean harmonic distance between extents</li>
</ul>
<pre><code class="yaml"><span class="hl-9">search</span><span class="hl-2">:</span><br/><span class="hl-2">  </span><span class="hl-9">pg</span><span class="hl-2">:</span><br/><span class="hl-2">    </span><span class="hl-9">normalization</span><span class="hl-2">: </span><span class="hl-10">2 | 4</span>
</code><button type="button">Copy</button></pre>

<p><strong>Note:</strong> the highlight search term feature uses <code>ts_headline</code> which has been known to potentially impact performance. You only need this minimal config to disable it should you have issues:</p>
<pre><code class="yaml"><span class="hl-9">search</span><span class="hl-2">:</span><br/><span class="hl-2">  </span><span class="hl-9">pg</span><span class="hl-2">:</span><br/><span class="hl-2">    </span><span class="hl-9">highlightOptions</span><span class="hl-2">:</span><br/><span class="hl-2">      </span><span class="hl-9">useHighlight</span><span class="hl-2">: </span><span class="hl-3">false</span>
</code><button type="button">Copy</button></pre>

<p>The Postgres documentation on <a href="https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-HEADLINE">Highlighting Results</a> has more details.</p>
</section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Modules"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Modules</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="index"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><a href="_backstage_plugin-search-backend-module-pg.index.html">index</a><a href="#index" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="pluginssearch-backend-module-pgsrcalpha"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><a href="_backstage_plugin-search-backend-module-pg.plugins_search-backend-module-pg_src_alpha.html">plugins/search-backend-module-pg/src/alpha</a><a href="#pluginssearch-backend-module-pgsrcalpha" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#search-backend-module-pg"><span>search-<wbr/>backend-<wbr/>module-<wbr/>pg</span></a><ul><li><a href="#getting-started"><span>Getting started</span></a></li><li><a href="#optional-configuration"><span>Optional <wbr/>Configuration</span></a></li></ul><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Modules"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Modules</summary><div><a href="#index"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><span>index</span></a><a href="#pluginssearch-backend-module-pgsrcalpha"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><span>plugins/search-<wbr/>backend-<wbr/>module-<wbr/>pg/src/alpha</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">root</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
